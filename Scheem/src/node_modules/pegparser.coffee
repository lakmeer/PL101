
fs   = require 'fs'
peg  = require 'pegjs'

readGrammar = (filename) ->
    fs.readFileSync filename, 'utf-8'

createParser = (filename) ->
    grammar = readGrammar filename
   	peg.buildParser(grammar).parse

if module?
	module.exports = createParser

else if Modules?
	Modules.parser = createParser

else
	window.Parser = createParser

